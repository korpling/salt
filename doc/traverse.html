<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Salt: Traversing graphs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="salt.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Salt
   &#160;<span id="projectnumber">3.4.1</span>
   </div>
   <div id="projectbrief">A powerful, tagset-independent and theory-neutral meta model and API for storing, manipulating, and representing nearly all types of linguistic data .</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('traverse.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Traversing graphs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When working with Salt, it is often necessary</p>
<ul>
<li>to discover the entire graph, or</li>
<li>to discover a sub graph covered by a given node, or</li>
<li>to discover a sub graph connected by specific types of relations.</li>
</ul>
<p>For all of these purposes, we offer the generic possibility to traverse a graph object (e.g. a <a class="el" href="interfaceorg_1_1corpus__tools_1_1salt_1_1common_1_1_s_corpus_graph.html">SCorpusGraph</a> or a <a class="el" href="interfaceorg_1_1corpus__tools_1_1salt_1_1common_1_1_s_document_graph.html">SDocumentGraph</a> object).</p>
<p>A traversal can be done in two directions: <b>top-down</b> and <b>bottom-up</b>. When using the top-down method, the traversal will follow the relation direction (e.g. <em>a</em> -&gt; <em>b&gt;</em>: node <em>a</em> will be visited first, followed by node <em>b</em>). When using the bottom-up method, the traversal will follow the inverse of the relation direction (e.g. <em>a</em> -&gt; <em>b</em>: node <em>b</em> will be visited before node <em>a</em>).</p>
<p>Additionally, you can choose the order in which nodes will be traversed. For this, we provide two modes: <b>depth-first</b> and <b>breadth-first</b>. In depth-first mode, the sub-graph of node <em>b</em> will be traversed, before its siblings will be visited. Imagine the following tree structure: </p><div class="fragment"><div class="line">  a</div><div class="line">/   \</div><div class="line">b   d</div><div class="line">|</div><div class="line">c</div></div><!-- fragment --><p>In this case, node <em>d</em> will be visited after <em>a,b,c</em> have been visited. In breadth-first mode, the order of the traversal is the other way around, i.e. the nodes <em>a,b,d</em> will be visited before node <em>c</em>.</p>
<p>To define the behavior of a traversal, we provide these types, which are combinations of the direction and the order of a traversal:</p>
<ul>
<li>org.corpus_tools.salt.core.SGraph.GRAPH_TRAVERSE_TYPE::TOP_DOWN_DEPTH_FIRST</li>
<li>org.corpus_tools.salt.core.SGraph.GRAPH_TRAVERSE_TYPE::TOP_DOWN_BREADTH_FIRST</li>
<li>org.corpus_tools.salt.core.SGraph.GRAPH_TRAVERSE_TYPE::BOTTOM_UP_DEPTH_FIRST</li>
<li>org.corpus_tools.salt.core.SGraph.GRAPH_TRAVERSE_TYPE::BOTTOM_UP_BREADTH_FIRST</li>
</ul>
<p>The traversal mechanism uses a callback, therefore you need a class implementing the interface <a class="el" href="interfaceorg_1_1corpus__tools_1_1salt_1_1core_1_1_graph_traverse_handler.html">GraphTraverseHandler</a>. This interface declares the following three methods, which need to be implemented:</p>
<div class="fragment"><div class="line"><span class="keyword">public</span> <span class="keywordtype">boolean</span> checkConstraint( GRAPH_TRAVERSE_TYPE traversalType, </div><div class="line">                                String traversalId,</div><div class="line">                                SRelation relation, </div><div class="line">                                SNode currNode, </div><div class="line">                                <span class="keywordtype">long</span> order);</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> nodeReached(        GRAPH_TRAVERSE_TYPE traversalType, </div><div class="line">                                String traversalId,</div><div class="line">                                SNode currNode, </div><div class="line">                                SRelation relation, </div><div class="line">                                SNode fromNode, </div><div class="line">                                <span class="keywordtype">long</span> order);</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keywordtype">void</span> nodeLeft(           GRAPH_TRAVERSE_TYPE traversalType, </div><div class="line">                                String traversalId,</div><div class="line">                                SNode currNode, </div><div class="line">                                SRelation relation, </div><div class="line">                                SNode fromNode, </div><div class="line">                                <span class="keywordtype">long</span> order);</div></div><!-- fragment --><p>When the traversal reaches a new node, the method <em>checkConstraint(...)</em> is called. It checks whether the following nodes and their sub-graphs should be processed any further. When this method returns true, the method <em>nodeReached(...)</em> is called next. Before a node is left, the method <em>nodeLeft(...)</em> is called. Note that the order of the method invocations depends on the traversal type used.</p>
<p>The following example shows the order of calls for the sample graph given in the following figure.</p>
<div class="image">
<img src="traversingExample.jpg" alt="traversingExample.jpg"/>
</div>
<p>Here, we list the callbacks in correct order in case of a depth-first traversal. We assume that the called object returns true for the method <em>checkConstraint(...)</em> on all nodes except node <em>span1</em>. In the case of node <em>span1</em>, the <em>checkConstraint(...)</em> method returns false. Therefore, no <em>nodeReached(...)</em> and <em>nodeLeft(...)</em> method will be called for this node. Note, that the list of parameters of the functions presented here is bigger than shown, e.g. the traversing policy and the relation via which the node has been reached is given, too.</p>
<ul>
<li>checkConstraint(struct1)</li>
<li>nodeReached(struct1)</li>
<li>checkConstraint(struct2)</li>
<li>nodeReached(struct2)</li>
<li>checkConstraint(tok1)</li>
<li>nodeReached(tok1)</li>
<li>nodeLeft(tok1)</li>
<li>checkConstraint(span1)</li>
<li>nodeLeft(struct2)</li>
<li>nodeLeft(struct1)</li>
</ul>
<p>To start the traversal, use the following method, available in any object derived from <em>SGraph</em> (e.g. <em>SCorpusGraph</em> or <em>SDocumentGraph</em>):</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> traverse(     List&lt;? extends SNode&gt; startNodes, </div><div class="line">                   GRAPH_TRAVERSE_TYPE traverseType, </div><div class="line">                   String traverseId, </div><div class="line">                   GraphTraverseHandler traverseHandler);</div></div><!-- fragment --><p> or</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> traverse(     List&lt;? extends SNode&gt; startNodes, </div><div class="line">                   GRAPH_TRAVERSE_TYPE traverseType, </div><div class="line">                   String traverseId, </div><div class="line">                   SGraphTraverseHandler traverseHandler, </div><div class="line">                   <span class="keywordtype">boolean</span> isCycleSafe);</div></div><!-- fragment --><ul>
<li><b>startNodes</b> represents a list of nodes, which shall be the entry point for traversal,</li>
<li><b>traverseType</b> is the combination of traversal direction and order explained above,</li>
<li><b>traverseid</b> is an identifier which can be used to identify the specific traversal job (this can be helpful if more than one is running at the same time) and</li>
<li><b>traverseHandler</b>, is the object which will be used for callback.</li>
</ul>
<p>Additionally, you can set a flag to protect the traversal engine from running in cycles. Per default, this flag is set to <b>false</b> and your <em>traverseHandler</em> has to deal with cyclic graphs itself.</p>
<p>To traverse our sample, you can use the following snippet:</p>
<div class="fragment"><div class="line"><span class="comment">//traversing the graph in depth first top down mode beginning with its roots</span></div><div class="line">docGraph.traverse(docGraph.getRoots(), GRAPH_TRAVERSE_TYPE.TOP_DOWN_DEPTH_FIRST, <span class="stringliteral">&quot;td&quot;</span>, <span class="keyword">new</span> GraphTraverseHandler() {</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> nodeReached(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SNode currNode, SRelation relation,</div><div class="line">                        SNode fromNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">        }</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">boolean</span> checkConstraint(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SRelation relation,</div><div class="line">                        SNode currNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> nodeLeft(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SNode currNode, SRelation&lt;SNode, SNode&gt; relation, SNode fromNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="comment">// TODO Auto-generated method stub</span></div><div class="line"></div><div class="line">        }</div><div class="line">});</div><div class="line"></div><div class="line"><span class="comment">//traversing the graph form the tokens to the top</span></div><div class="line">docGraph.traverse(docGraph.getSTokens(), GRAPH_TRAVERSE_TYPE.BOTTOM_UP_BREADTH_FIRST, <span class="stringliteral">&quot;bu&quot;</span>, <span class="keyword">new</span> GraphTraverseHandler() {</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> nodeReached(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SNode currNode, SRelation relation,</div><div class="line">                        SNode fromNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">        }</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">void</span> nodeLeft(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SNode currNode, SRelation relation,</div><div class="line">                        SNode fromNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="comment">// TODO Auto-generated method stub</span></div><div class="line">        }</div><div class="line"></div><div class="line">        @Override</div><div class="line">        <span class="keyword">public</span> <span class="keywordtype">boolean</span> checkConstraint(GRAPH_TRAVERSE_TYPE traversalType, String traversalId, SRelation relation,</div><div class="line">                        SNode currNode, <span class="keywordtype">long</span> order) {</div><div class="line">                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line">        }</div><div class="line">}, <span class="keyword">false</span>);</div><div class="line"></div><div class="line">}</div></div><!-- fragment --><p>To learn how to persist and load a Salt model, please read the article <a class="el" href="persist.html">Persist and Load</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Apr 3 2020 10:47:47 for Salt by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>