/*
 * Copyright 2013 Humboldt Univerity of Berlin, INRIA.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
package de.hu_berlin.german.korpling.saltnpepper.salt.benchmark;

import static org.junit.Assert.assertNotNull;
import static org.junit.Assert.assertTrue;

import org.eclipse.emf.common.util.URI;
import org.junit.Rule;
import org.junit.Test;
import org.junit.rules.TestRule;

import com.carrotsearch.junitbenchmarks.BenchmarkOptions;
import com.carrotsearch.junitbenchmarks.BenchmarkRule;
import com.carrotsearch.junitbenchmarks.annotation.AxisRange;
import com.carrotsearch.junitbenchmarks.annotation.BenchmarkHistoryChart;
import com.carrotsearch.junitbenchmarks.annotation.BenchmarkMethodChart;
import com.carrotsearch.junitbenchmarks.annotation.LabelType;

import de.hu_berlin.german.korpling.saltnpepper.salt.SaltFactory;
import de.hu_berlin.german.korpling.saltnpepper.salt.saltCommon.sDocumentStructure.SDocumentGraph;
import de.hu_berlin.german.korpling.saltnpepper.salt.saltCommon.sDocumentStructure.STextualDS;
import de.hu_berlin.german.korpling.saltnpepper.salt.saltCommon.sDocumentStructure.STextualRelation;
import de.hu_berlin.german.korpling.saltnpepper.salt.saltCommon.sDocumentStructure.SToken;

/**
 *
 * @author Thomas Krause <thomas.krause@alumni.hu-berlin.de>
 */
@BenchmarkOptions(callgc = false, benchmarkRounds = 5, warmupRounds = 5)
@BenchmarkMethodChart(filePrefix = "salt-benchmark")
@BenchmarkHistoryChart(labelWith = LabelType.RUN_ID, maxRuns = 20)
@AxisRange(min = 0.0)
public class SaltBenchmarkTest {
	@Rule
	public TestRule benchmarkRun = new BenchmarkRule();

	@Test
	public void benchmarkPCC_11299() {
		URI benchmarkFile = URI
				.createFileURI("./src/test/resources/pcc/11299.salt");
		Object obj = SaltFactory.eINSTANCE.load(benchmarkFile);
		assertNotNull(obj);
		assertTrue(obj instanceof SDocumentGraph);
	}
	
	@Test
	public void createTokens(){
		SDocumentGraph graph= SaltFactory.eINSTANCE.createSDocumentGraph();
		STextualDS sText= SaltFactory.eINSTANCE.createSTextualDS();
		sText.setSText("Æthelred of MerciaFrom Wikipedia, the free encyclopediaFor the later Mercian ruler, see Æthelred, Lord of the Mercians.ÆthelredSt John's Church, Chester - Westfenster 2.jpgStained glass window in St John's ChesterKing of MerciaReign 	675–704Predecessor 	WulfhereSuccessor 	CoenredSpouse 	OsthrythIssue 	CeolredCeolwald (possibly)Dynasty 	IclingasFather 	PendaMother 	Cynewise (possibly)Born 	c. 645 ADDied 	c. 709 ADBurial 	Bardney Abbey, LindseyReligion 	Roman CatholicÆthelred (/ˈæθəlrɛd/; died after 704) was King of Mercia from 675 until 704. He was the son of Penda of Mercia and came to the throne in 675, when his brother, Wulfhere of Mercia, died. Within a year of his accession he invaded Kent, where his armies destroyed the city of Rochester. In 679 he defeated his brother-in-law, Ecgfrith of Northumbria, at the Battle of the Trent: the battle was a major setback for the Northumbrians, and effectively ended their military involvement in English affairs south of the Humber. It also permanently returned the kingdom of Lindsey to Mercia's possession. However, Æthelred was unable to re-establish his predecessors' domination of southern Britain.He was known as a pious and devout Christian king, and he made many grants of land to the church. It was during his reign that Theodore, the Archbishop of Canterbury, reorganized the church's diocesan structure, creating several new sees in Mercia and Northumbria. Æthelred befriended Bishop Wilfrid of York when Wilfrid was expelled from his see in Northumbria; Æthelred made Wilfrid Bishop of the Middle Angles during his exile and supported him at the synod of Austerfield in about 702, when Wilfrid argued his case for the return of the ecclesiastical lands he had been deprived of in Northumbria.Æthelred's wife, Osthryth, was a daughter of King Oswiu, one of the dominant 7th-century Northumbrian kings. Osthryth was murdered in unknown circumstances in 697, and in 704 Æthelred abdicated, leaving the throne to Wulfhere's son Coenred. Æthelred became a monk at Bardney, a monastery which he had founded with his wife, and was buried there. Ceolred, who was Æthelred's son (though apparently not by Osthryth), became king after Coenred; it is also possible that Æthelred had another son named Ceolwald who was briefly king before Ceolred.Contents    1 Mercia in the seventh century    2 Ancestry and early reign    3 Relations with Northumbria    4 The southern kingdoms    5 Abdication and final years    6 See also    7 Notes    8 ReferencesMercia in the seventh centuryThe kingdoms of Britain in the late 7th centuryBy the 7th century, England was almost entirely divided into kingdoms ruled by the Anglo-Saxons who had come to Britain two hundred years before. The kingdom of Mercia occupied what is now the English midlands. The origin of the kingdom is not recorded, but royal genealogies preserved in the Anglo-Saxon Chronicle and the Anglian collection agree that the royal houses were descended from a founder named Icel; the Mercian royal house is hence known as the Iclingas.[1] The earliest Mercian king about whom definite historical information has survived is Penda of Mercia, Æthelred's father.[2] The larger neighbouring kingdoms included Northumbria to the north, recently united from its constituent kingdoms of Bernicia and Deira, East Anglia to the east, and Wessex, the kingdom of the West Saxons, to the south.According to Ecclesiastical History of the English People, a history of the English church written by the 8th-century monk Bede, there were seven early Anglo-Saxon rulers who held imperium, or overlordship, over the other kingdoms.[3] The fifth of these was Edwin of Northumbria, who was killed at the battle of Hatfield Chase by a combined force including Cadwallon, a British king of Gwynedd, and Penda.[4][5] After Edwin's death, Northumbria briefly fell apart into its two subkingdoms of Bernicia and Deira. Within a year Oswald, Edwin's nephew, killed Cadwallon and reunited the kingdoms, subsequently re-establishing Northumbrian hegemony over the south of England.[5] In 642 Penda killed Oswald at the battle of Maserfield,[6] and Northumbria was again divided. Oswald's son Oswiu succeeded to the throne of Bernicia, and Osric's son Oswine to Deira, the southern of the two kingdoms.[7]In 655, Oswiu defeated and killed Penda at the Battle of the Winwaed.[4] Oswiu installed Peada, a son of Penda, as king of southern Mercia and ruled the northern half himself; after Peada was murdered in 656 Oswiu took direct control of all of Mercia. A coup in 658 threw off Northumbrian overlordship and established Wulfhere as king.[8] By the early 670s, Wulfhere had become the most powerful king in southern Britain, with an effective hegemony over all the Anglo-Saxon kingdoms except for Northumbria.[9]The main source for this period is Bede's History, completed in about 731. Despite its focus on the history of the church, this work also provides valuable information about the early Anglo-Saxon kingdoms. For Wessex and Kent, Bede had informants who supplied him with details of the church's history in each province, but he appears to have had no such contact in Mercia, about which he is less well-informed.[10] A further source for this period is the Anglo-Saxon Chronicle, compiled at the end of the 9th century in Wessex. The Chronicle '​s anonymous scribe appears to have incorporated much information recorded in earlier periods.[11]Ancestry and early reignÆthelred's immediate relationsÆthelred was the son of Penda of Mercia. Penda's queen, Cynewise, is named by Bede, who does not mention her children; no other wives of Penda are known and so it is likely but not certain that she was Æthelred's mother.[12][13] The Anglo-Saxon Chronicle gives Penda's age as fifty in 626, and credits him with a thirty-year reign, but this would put Penda at eighty years old at the time of his death, which is generally thought unlikely as two of his sons (Wulfhere and Æthelred) were young when he was killed. At least as likely is that Penda was fifty years old at his death, rather than at his accession.[4][14] Æthelred's date of birth is unknown, but Bede describes Wulfhere as a youth at the time of his accession in 658, so it is likely he and Æthelred were in their middle teens at that time.[15] The early sources do not say whether Æthelred was older or younger than Wulfhere.Nothing is known of Æthelred's childhood. He had another brother, Peada, and two sisters, Cyneburh and Cyneswith;[16][17] it is also possible that Merewalh, king of the Magonsæte, was Æthelred's brother.[18]In 674, according to Stephen of Ripon, Wulfhere 'stirred up all the southern nations against [Northumbria]',[19] but he was defeated by Oswiu's son Ecgfrith who forced him to surrender Lindsey, and to pay tribute.[20] Wulfhere survived the defeat, but died in 675, possibly of disease,[21] and Æthelred became king.[22][23]The first recorded act of Æthelred's reign is in 676, when his armies ravaged Kent, destroying Rochester, the seat of the bishops of West Kent.[24] The reason for his attack is not recorded, but he may have wished to prevent King Hlothhere of Kent from regaining control of Surrey, which had been recently brought into the Mercian orbit by Wulfhere.[25] It may also be that Æthelred wished for revenge for the murder of the sons of Eormenred of Kent; the murders had been instigated by Ecgberht of Kent, Hlothhere's brother, and it is possible that Æthelred was the uncle of the murdered princes.[26] A third suggestion is that the kings of Essex solicited the invasion, in response to recent Kentish attempts to gain dominance over the East Saxons.[27] Regardless of the reason, Hlothhere was likely then forced to accept Æthelred's overlordship.[27] The damage to the see of Rochester was so great that the incumbent bishop, Putta, retired from his diocese; his appointed successor, Cwichhelm, also gave up the see 'because of its poverty'.[24][28]Early in Æthelred's reign, Theodore, the Archbishop of Canterbury, began a substantial reorganization of the church in Mercia. In 675 he removed Winfred from his position as Bishop of Lichfield, and over the next four years he divided the vast Mercian see into the five dioceses of Leicester, Lichfield, Worcester, Dorchester and Hereford.[29] Æthelred was a devout king, 'more famed for his pious disposition than his skill in war',[30] and he made several gifts of land to the expanding church, including grants at Tetbury, Long Newton, and Somerford Keynes. There is also a tradition that Æthelred was associated with the founding of Abingdon Abbey, in southern Oxfordshire.[31]Relations with NorthumbriaMercia had been in conflict with Northumbria since at least 633, when Penda of Mercia defeated and killed Edwin of Northumbria at the Battle of Hatfield Chase.[7] However, there were diplomatic marriages between the two kingdoms: Æthelred's sister Cyneburh married Alhfrith, a son of Oswiu of Northumbria, and both Æthelred and his brother Peada married daughters of Oswiu. Cyneburh's marriage to Alhfrith took place in the early 650s, and Peada's marriage, to Ealhflæd, followed shortly afterwards; Æthelred's marriage, to Osthryth, is of unknown date but must have occurred before 679, since Bede mentions it in describing the Battle of the Trent, which took place that year.[16][25][32]Bede does not mention the cause of the battle, simply saying that it occurred in the ninth year of Ecgfrith's reign. He is more informative on the outcome. Ælfwine, the young subking of Deira, was killed; Ælfwine was brother to Osthryth and Ecgfrith, and was well liked in both Mercia and Northumbria since Æthelred's marriage to Osthryth. According to Bede, his death threatened to cause further strife between the two kingdoms, but Theodore, the Archbishop of Canterbury, intervened:[33]    Theodore, the beloved of God, enlisting God's help, smothered the flames of this awful peril by his wholesome advice. As a result, peace was restored between the kings and peoples, and in lieu of further bloodshed the customary compensation was paid to King Ecgfrith for his brother's death.Æthelred took possession of Lindsey again after the battle; the change in control this time was lasting, and Lindsey remained part of Mercia until the Viking invasion of the 9th century remade the map of England.[24][25] Conflict between Northumbria and Mercia did not completely cease after this date: Scottish annals record that Æthelbald, an 8th-century Mercian king, ravaged Northumbrian territory in 740 while King Eadberht of Northumbria was absent fighting the Picts.[34] However, the Battle of the Trent effectively ended Northumbrian involvement in southern Britain.[35]A conflict between Bishop Wilfrid of York and the church and secular establishment led to Wilfrid's expulsion from Northumbria and the division of his vast diocese, and Æthelred sided with Ecgfrith against Wilfrid. After Ecgfrith's death in 685, Archbishop Theodore arranged a reconciliation between Wilfrid and Aldfrith, Ecgfrith's successor, but in 692 Aldfrith and Wilfrid fell out and Wilfrid went into exile in Mercia.[36][37] Æthelred now supported Wilfrid, making him bishop of the Middle Angles, and defending him at the Council of Austerfield in about 702, when Wilfrid argued his case before an assembly of bishops led by Archbishop Berhtwald of Canterbury.[38][39] Æthelred's support for Wilfrid embroiled him in dispute with both Canterbury and Northumbria, and it is not clear what his motive was, though it may be relevant that some of Wilfrid's monasteries were in Mercian territory.[38]The southern kingdomsTwo charters of 681 show Æthelred granting land near Tetbury, on what is now the border between Gloucestershire and Wiltshire.[25][40][41] This may indicate that Æthelred was able to extend Mercian influence further into the territory of the West Saxons, as Wulfhere had done before him.[9][25] The West Saxons managed a significant military resurgence under Cædwalla, king of Wessex from about 685 to 688, but when Cædwalla departed for Rome on pilgrimage there may have been internal strife before Ine, his successor, took the throne. Cædwalla had successfully conquered the kingdoms of Sussex and Kent, and his abdication may have contributed to the unsettled history of the southeast over the next few years.[42] In Kent, Oswine emerged as king, though only in eastern Kent; the western half of the kingdom was ruled by Swæfheard, son of Sæbbi, the king of Essex. It is possible that Æthelred provided support to both Swæfheard and Oswine; for each king a charter survives in which Æthelred confirms land grants they made in Kent, and Æthelred's invasion of Kent in 676 indicates his opposition to the traditional Kentish royal house.[42][43][44][45] A charter of Swæfheard's dated 691 is also of interest as it indicates that Æthelred had invaded Kent; it has been suggested that Æthelred intended to place Wilfrid in the Archbishop's seat at Canterbury, but if so he was unsuccessful.[38][46] Alternatively, Æthelred may have needed assistance in Kent from the East Saxons who may have been independent of Mercia for a decade or more by that time.[47] The East Saxons did return to the Mercian orbit over the next few years: a charter of Æthelred's, dated between 693 and 704, shows him granting land to Wealdhere, the bishop of London, and in 704 Æthelred consented to a grant made by Swæfheard.[47][48][49] The latter charter also appears to show that a comes, or local official, was put in place by the Mercians to protect their interests.[49][50]Despite this evidence of Mercian involvement in the southeast there is very little indication that Æthelred had expansionist ambitions to the south.[38] The increasing strength of the West Saxons under Cædwalla and Ine would have limited Mercian opportunities in that direction.[22] The Northumbrians were no longer a distraction; they had been contained north of the Humber since the Battle of the Trent, and became even less of a threat after their disastrous defeat in 685 at the hands of the Picts. A possible explanation is that Æthelred was preoccupied with war with the Welsh. It was also at this time that the Hwicce came more definitely into the Mercian orbit. The last Hwiccean ruler to take the title of king was Oshere, who died in 685; but from the mid-670s he sought Æthelred's consent for his grants, and Æthelred regarded him as a subking. Further evidence of Æthelred's involvement among the Hwicce comes from a charter in which he grants land for a minster in Gloucestershire, in Hwiccean territory; the charter is generally thought to be a fabrication, but it appears to be based on an authentic earlier source.[38][51]Abdication and final yearsOsthryth was murdered in 697, for reasons unknown; according to Bede the murderers were 'her own people, the Mercian chieftains'.[52] Bede records that Peada's death, forty years earlier, stemmed from 'the treachery, it is said, of his own wife';[53] Peada's wife was Ealhflæd, Osthryth's sister. Hence Osthryth's murder may have been in revenge for Peada's assassination,[38] though it has also been interpreted more directly as a sign of continuing hostility between Northumbria and Mercia.[37][54] Osthryth was buried at Bardney in Lindsey, the monastery where, at her urging, the relics of her uncle, Oswald of Northumbria, were kept and revered,[38][55] though evidence of resistance at Bardney to the cult of Oswald is also indicative of the poor relations between the two kingdoms.[54]In 704, Æthelred abdicated to become a monk and abbot at Bardney, leaving the kingship to his nephew Coenred.[56] Seventh century Mercian rulers often patronised religious establishments outside the Mercian heartlands, perhaps as a way of gaining support in outlying provinces. Æthelred's and Osthryth's interest in Bardney is consistent with this pattern. The encouragement of the cult of royal saints in areas beyond the central Mercian lands also seems to have been a deliberate policy, and both Æthelred and Osthryth were later revered as saints at Bardney.[57] It appears that Æthelred continued to have influence in the kingdom after his abdication: a passage in Stephen of Ripon's Life of Wilfrid shows Æthelred summoning Coenred to him and advising him to make peace with Wilfrid.[56][58] The date of Æthelred's death is not recorded; though it is known that he was buried at Bardney.[59]Æthelred had at least one son, Ceolred. According to the thirteenth-century Chronicon Abbatiae de Evesham, Ceolred was not the son of Osthryth, although it does not name Ceolred's mother, and in the view of the historian Ann Williams this may mean that Æthelred re-married after Osthryth's death. However, Susan Kelly states that Osthryth was 'most likely (though not certainly)' Ceolred's mother. Ceolred succeeded to the throne in 709, after Coenred abdicated in 709 to go to Rome on pilgrimage.[60][61][37] One version of the regnal lists for Mercia shows a king named Ceolwald reigning after Ceolred, and it is possible that Ceolwald, if he existed, was also a son of Æthelred's.[56]");
		graph.addSNode(sText);
		
		SToken token= null;
		STextualRelation rel= null;
		for (int i= 0; i< 8000; i=i+2){
			token= SaltFactory.eINSTANCE.createSToken();
			rel= SaltFactory.eINSTANCE.createSTextualRelation();
			graph.addSNode(token);
			rel.setSToken(token);
			rel.setSTextualDS(sText);
			rel.setSStart(i);
			rel.setSEnd(i+1);
			graph.addSRelation(rel);
		}
	}
	
	public void createTokensWithAnnos(){
		SDocumentGraph graph= SaltFactory.eINSTANCE.createSDocumentGraph();
		STextualDS sText= SaltFactory.eINSTANCE.createSTextualDS();
		sText.setSText("Æthelred of MerciaFrom Wikipedia, the free encyclopediaFor the later Mercian ruler, see Æthelred, Lord of the Mercians.ÆthelredSt John's Church, Chester - Westfenster 2.jpgStained glass window in St John's ChesterKing of MerciaReign 	675–704Predecessor 	WulfhereSuccessor 	CoenredSpouse 	OsthrythIssue 	CeolredCeolwald (possibly)Dynasty 	IclingasFather 	PendaMother 	Cynewise (possibly)Born 	c. 645 ADDied 	c. 709 ADBurial 	Bardney Abbey, LindseyReligion 	Roman CatholicÆthelred (/ˈæθəlrɛd/; died after 704) was King of Mercia from 675 until 704. He was the son of Penda of Mercia and came to the throne in 675, when his brother, Wulfhere of Mercia, died. Within a year of his accession he invaded Kent, where his armies destroyed the city of Rochester. In 679 he defeated his brother-in-law, Ecgfrith of Northumbria, at the Battle of the Trent: the battle was a major setback for the Northumbrians, and effectively ended their military involvement in English affairs south of the Humber. It also permanently returned the kingdom of Lindsey to Mercia's possession. However, Æthelred was unable to re-establish his predecessors' domination of southern Britain.He was known as a pious and devout Christian king, and he made many grants of land to the church. It was during his reign that Theodore, the Archbishop of Canterbury, reorganized the church's diocesan structure, creating several new sees in Mercia and Northumbria. Æthelred befriended Bishop Wilfrid of York when Wilfrid was expelled from his see in Northumbria; Æthelred made Wilfrid Bishop of the Middle Angles during his exile and supported him at the synod of Austerfield in about 702, when Wilfrid argued his case for the return of the ecclesiastical lands he had been deprived of in Northumbria.Æthelred's wife, Osthryth, was a daughter of King Oswiu, one of the dominant 7th-century Northumbrian kings. Osthryth was murdered in unknown circumstances in 697, and in 704 Æthelred abdicated, leaving the throne to Wulfhere's son Coenred. Æthelred became a monk at Bardney, a monastery which he had founded with his wife, and was buried there. Ceolred, who was Æthelred's son (though apparently not by Osthryth), became king after Coenred; it is also possible that Æthelred had another son named Ceolwald who was briefly king before Ceolred.Contents    1 Mercia in the seventh century    2 Ancestry and early reign    3 Relations with Northumbria    4 The southern kingdoms    5 Abdication and final years    6 See also    7 Notes    8 ReferencesMercia in the seventh centuryThe kingdoms of Britain in the late 7th centuryBy the 7th century, England was almost entirely divided into kingdoms ruled by the Anglo-Saxons who had come to Britain two hundred years before. The kingdom of Mercia occupied what is now the English midlands. The origin of the kingdom is not recorded, but royal genealogies preserved in the Anglo-Saxon Chronicle and the Anglian collection agree that the royal houses were descended from a founder named Icel; the Mercian royal house is hence known as the Iclingas.[1] The earliest Mercian king about whom definite historical information has survived is Penda of Mercia, Æthelred's father.[2] The larger neighbouring kingdoms included Northumbria to the north, recently united from its constituent kingdoms of Bernicia and Deira, East Anglia to the east, and Wessex, the kingdom of the West Saxons, to the south.According to Ecclesiastical History of the English People, a history of the English church written by the 8th-century monk Bede, there were seven early Anglo-Saxon rulers who held imperium, or overlordship, over the other kingdoms.[3] The fifth of these was Edwin of Northumbria, who was killed at the battle of Hatfield Chase by a combined force including Cadwallon, a British king of Gwynedd, and Penda.[4][5] After Edwin's death, Northumbria briefly fell apart into its two subkingdoms of Bernicia and Deira. Within a year Oswald, Edwin's nephew, killed Cadwallon and reunited the kingdoms, subsequently re-establishing Northumbrian hegemony over the south of England.[5] In 642 Penda killed Oswald at the battle of Maserfield,[6] and Northumbria was again divided. Oswald's son Oswiu succeeded to the throne of Bernicia, and Osric's son Oswine to Deira, the southern of the two kingdoms.[7]In 655, Oswiu defeated and killed Penda at the Battle of the Winwaed.[4] Oswiu installed Peada, a son of Penda, as king of southern Mercia and ruled the northern half himself; after Peada was murdered in 656 Oswiu took direct control of all of Mercia. A coup in 658 threw off Northumbrian overlordship and established Wulfhere as king.[8] By the early 670s, Wulfhere had become the most powerful king in southern Britain, with an effective hegemony over all the Anglo-Saxon kingdoms except for Northumbria.[9]The main source for this period is Bede's History, completed in about 731. Despite its focus on the history of the church, this work also provides valuable information about the early Anglo-Saxon kingdoms. For Wessex and Kent, Bede had informants who supplied him with details of the church's history in each province, but he appears to have had no such contact in Mercia, about which he is less well-informed.[10] A further source for this period is the Anglo-Saxon Chronicle, compiled at the end of the 9th century in Wessex. The Chronicle '​s anonymous scribe appears to have incorporated much information recorded in earlier periods.[11]Ancestry and early reignÆthelred's immediate relationsÆthelred was the son of Penda of Mercia. Penda's queen, Cynewise, is named by Bede, who does not mention her children; no other wives of Penda are known and so it is likely but not certain that she was Æthelred's mother.[12][13] The Anglo-Saxon Chronicle gives Penda's age as fifty in 626, and credits him with a thirty-year reign, but this would put Penda at eighty years old at the time of his death, which is generally thought unlikely as two of his sons (Wulfhere and Æthelred) were young when he was killed. At least as likely is that Penda was fifty years old at his death, rather than at his accession.[4][14] Æthelred's date of birth is unknown, but Bede describes Wulfhere as a youth at the time of his accession in 658, so it is likely he and Æthelred were in their middle teens at that time.[15] The early sources do not say whether Æthelred was older or younger than Wulfhere.Nothing is known of Æthelred's childhood. He had another brother, Peada, and two sisters, Cyneburh and Cyneswith;[16][17] it is also possible that Merewalh, king of the Magonsæte, was Æthelred's brother.[18]In 674, according to Stephen of Ripon, Wulfhere 'stirred up all the southern nations against [Northumbria]',[19] but he was defeated by Oswiu's son Ecgfrith who forced him to surrender Lindsey, and to pay tribute.[20] Wulfhere survived the defeat, but died in 675, possibly of disease,[21] and Æthelred became king.[22][23]The first recorded act of Æthelred's reign is in 676, when his armies ravaged Kent, destroying Rochester, the seat of the bishops of West Kent.[24] The reason for his attack is not recorded, but he may have wished to prevent King Hlothhere of Kent from regaining control of Surrey, which had been recently brought into the Mercian orbit by Wulfhere.[25] It may also be that Æthelred wished for revenge for the murder of the sons of Eormenred of Kent; the murders had been instigated by Ecgberht of Kent, Hlothhere's brother, and it is possible that Æthelred was the uncle of the murdered princes.[26] A third suggestion is that the kings of Essex solicited the invasion, in response to recent Kentish attempts to gain dominance over the East Saxons.[27] Regardless of the reason, Hlothhere was likely then forced to accept Æthelred's overlordship.[27] The damage to the see of Rochester was so great that the incumbent bishop, Putta, retired from his diocese; his appointed successor, Cwichhelm, also gave up the see 'because of its poverty'.[24][28]Early in Æthelred's reign, Theodore, the Archbishop of Canterbury, began a substantial reorganization of the church in Mercia. In 675 he removed Winfred from his position as Bishop of Lichfield, and over the next four years he divided the vast Mercian see into the five dioceses of Leicester, Lichfield, Worcester, Dorchester and Hereford.[29] Æthelred was a devout king, 'more famed for his pious disposition than his skill in war',[30] and he made several gifts of land to the expanding church, including grants at Tetbury, Long Newton, and Somerford Keynes. There is also a tradition that Æthelred was associated with the founding of Abingdon Abbey, in southern Oxfordshire.[31]Relations with NorthumbriaMercia had been in conflict with Northumbria since at least 633, when Penda of Mercia defeated and killed Edwin of Northumbria at the Battle of Hatfield Chase.[7] However, there were diplomatic marriages between the two kingdoms: Æthelred's sister Cyneburh married Alhfrith, a son of Oswiu of Northumbria, and both Æthelred and his brother Peada married daughters of Oswiu. Cyneburh's marriage to Alhfrith took place in the early 650s, and Peada's marriage, to Ealhflæd, followed shortly afterwards; Æthelred's marriage, to Osthryth, is of unknown date but must have occurred before 679, since Bede mentions it in describing the Battle of the Trent, which took place that year.[16][25][32]Bede does not mention the cause of the battle, simply saying that it occurred in the ninth year of Ecgfrith's reign. He is more informative on the outcome. Ælfwine, the young subking of Deira, was killed; Ælfwine was brother to Osthryth and Ecgfrith, and was well liked in both Mercia and Northumbria since Æthelred's marriage to Osthryth. According to Bede, his death threatened to cause further strife between the two kingdoms, but Theodore, the Archbishop of Canterbury, intervened:[33]    Theodore, the beloved of God, enlisting God's help, smothered the flames of this awful peril by his wholesome advice. As a result, peace was restored between the kings and peoples, and in lieu of further bloodshed the customary compensation was paid to King Ecgfrith for his brother's death.Æthelred took possession of Lindsey again after the battle; the change in control this time was lasting, and Lindsey remained part of Mercia until the Viking invasion of the 9th century remade the map of England.[24][25] Conflict between Northumbria and Mercia did not completely cease after this date: Scottish annals record that Æthelbald, an 8th-century Mercian king, ravaged Northumbrian territory in 740 while King Eadberht of Northumbria was absent fighting the Picts.[34] However, the Battle of the Trent effectively ended Northumbrian involvement in southern Britain.[35]A conflict between Bishop Wilfrid of York and the church and secular establishment led to Wilfrid's expulsion from Northumbria and the division of his vast diocese, and Æthelred sided with Ecgfrith against Wilfrid. After Ecgfrith's death in 685, Archbishop Theodore arranged a reconciliation between Wilfrid and Aldfrith, Ecgfrith's successor, but in 692 Aldfrith and Wilfrid fell out and Wilfrid went into exile in Mercia.[36][37] Æthelred now supported Wilfrid, making him bishop of the Middle Angles, and defending him at the Council of Austerfield in about 702, when Wilfrid argued his case before an assembly of bishops led by Archbishop Berhtwald of Canterbury.[38][39] Æthelred's support for Wilfrid embroiled him in dispute with both Canterbury and Northumbria, and it is not clear what his motive was, though it may be relevant that some of Wilfrid's monasteries were in Mercian territory.[38]The southern kingdomsTwo charters of 681 show Æthelred granting land near Tetbury, on what is now the border between Gloucestershire and Wiltshire.[25][40][41] This may indicate that Æthelred was able to extend Mercian influence further into the territory of the West Saxons, as Wulfhere had done before him.[9][25] The West Saxons managed a significant military resurgence under Cædwalla, king of Wessex from about 685 to 688, but when Cædwalla departed for Rome on pilgrimage there may have been internal strife before Ine, his successor, took the throne. Cædwalla had successfully conquered the kingdoms of Sussex and Kent, and his abdication may have contributed to the unsettled history of the southeast over the next few years.[42] In Kent, Oswine emerged as king, though only in eastern Kent; the western half of the kingdom was ruled by Swæfheard, son of Sæbbi, the king of Essex. It is possible that Æthelred provided support to both Swæfheard and Oswine; for each king a charter survives in which Æthelred confirms land grants they made in Kent, and Æthelred's invasion of Kent in 676 indicates his opposition to the traditional Kentish royal house.[42][43][44][45] A charter of Swæfheard's dated 691 is also of interest as it indicates that Æthelred had invaded Kent; it has been suggested that Æthelred intended to place Wilfrid in the Archbishop's seat at Canterbury, but if so he was unsuccessful.[38][46] Alternatively, Æthelred may have needed assistance in Kent from the East Saxons who may have been independent of Mercia for a decade or more by that time.[47] The East Saxons did return to the Mercian orbit over the next few years: a charter of Æthelred's, dated between 693 and 704, shows him granting land to Wealdhere, the bishop of London, and in 704 Æthelred consented to a grant made by Swæfheard.[47][48][49] The latter charter also appears to show that a comes, or local official, was put in place by the Mercians to protect their interests.[49][50]Despite this evidence of Mercian involvement in the southeast there is very little indication that Æthelred had expansionist ambitions to the south.[38] The increasing strength of the West Saxons under Cædwalla and Ine would have limited Mercian opportunities in that direction.[22] The Northumbrians were no longer a distraction; they had been contained north of the Humber since the Battle of the Trent, and became even less of a threat after their disastrous defeat in 685 at the hands of the Picts. A possible explanation is that Æthelred was preoccupied with war with the Welsh. It was also at this time that the Hwicce came more definitely into the Mercian orbit. The last Hwiccean ruler to take the title of king was Oshere, who died in 685; but from the mid-670s he sought Æthelred's consent for his grants, and Æthelred regarded him as a subking. Further evidence of Æthelred's involvement among the Hwicce comes from a charter in which he grants land for a minster in Gloucestershire, in Hwiccean territory; the charter is generally thought to be a fabrication, but it appears to be based on an authentic earlier source.[38][51]Abdication and final yearsOsthryth was murdered in 697, for reasons unknown; according to Bede the murderers were 'her own people, the Mercian chieftains'.[52] Bede records that Peada's death, forty years earlier, stemmed from 'the treachery, it is said, of his own wife';[53] Peada's wife was Ealhflæd, Osthryth's sister. Hence Osthryth's murder may have been in revenge for Peada's assassination,[38] though it has also been interpreted more directly as a sign of continuing hostility between Northumbria and Mercia.[37][54] Osthryth was buried at Bardney in Lindsey, the monastery where, at her urging, the relics of her uncle, Oswald of Northumbria, were kept and revered,[38][55] though evidence of resistance at Bardney to the cult of Oswald is also indicative of the poor relations between the two kingdoms.[54]In 704, Æthelred abdicated to become a monk and abbot at Bardney, leaving the kingship to his nephew Coenred.[56] Seventh century Mercian rulers often patronised religious establishments outside the Mercian heartlands, perhaps as a way of gaining support in outlying provinces. Æthelred's and Osthryth's interest in Bardney is consistent with this pattern. The encouragement of the cult of royal saints in areas beyond the central Mercian lands also seems to have been a deliberate policy, and both Æthelred and Osthryth were later revered as saints at Bardney.[57] It appears that Æthelred continued to have influence in the kingdom after his abdication: a passage in Stephen of Ripon's Life of Wilfrid shows Æthelred summoning Coenred to him and advising him to make peace with Wilfrid.[56][58] The date of Æthelred's death is not recorded; though it is known that he was buried at Bardney.[59]Æthelred had at least one son, Ceolred. According to the thirteenth-century Chronicon Abbatiae de Evesham, Ceolred was not the son of Osthryth, although it does not name Ceolred's mother, and in the view of the historian Ann Williams this may mean that Æthelred re-married after Osthryth's death. However, Susan Kelly states that Osthryth was 'most likely (though not certainly)' Ceolred's mother. Ceolred succeeded to the throne in 709, after Coenred abdicated in 709 to go to Rome on pilgrimage.[60][61][37] One version of the regnal lists for Mercia shows a king named Ceolwald reigning after Ceolred, and it is possible that Ceolwald, if he existed, was also a son of Æthelred's.[56]");
		graph.addSNode(sText);
		
		SToken token= null;
		STextualRelation rel= null;
		for (int i= 0; i< 8000; i=i+2){
			token= SaltFactory.eINSTANCE.createSToken();
			rel= SaltFactory.eINSTANCE.createSTextualRelation();
			graph.addSNode(token);
			rel.setSToken(token);
			rel.setSTextualDS(sText);
			rel.setSStart(i);
			rel.setSEnd(i+1);
			graph.addSRelation(rel);
			token.createSAnnotation("namespace", "pos", "PP");
			token.createSAnnotation("namespace", "lemma", "bla");
		}
	}
}
